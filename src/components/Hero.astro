---
import { getTranslations, getLang } from '@i18n/utils';

const lang = getLang(Astro.url);
const t = await getTranslations(lang);
const profile = {
  name: t.hero.name,
  role: t.hero.role,
  summary: t.hero.summary,
  cvLink: 'https://tinnh.com/docs/nguyenhoangtin-cv.pdf'
};

const highlights = [
  { title: t.hero.highlights.frontend, content: t.hero.highlights.frontendContent },
  { title: t.hero.highlights.backend, content: t.hero.highlights.backendContent },
  { title: t.hero.highlights.devops, content: t.hero.highlights.devopsContent },
  { title: t.hero.highlights.english, content: t.hero.highlights.englishContent },
  { title: t.hero.highlights.other, content: t.hero.highlights.otherContent }
];
---

<section class="hero" id="gioi-thieu">
  <div class="intro" data-slide-in="right">
    <h1 data-i18n="hero.name">{profile.name}</h1>
    <p class="subtitle" data-i18n="hero.summary">{profile.summary}</p>
    <div class="bio">
      <p><strong data-i18n="hero.highlights.frontend">{highlights[0].title}</strong> <span data-i18n="hero.highlights.frontendContent">{highlights[0].content}</span></p>
      <p><strong data-i18n="hero.highlights.backend">{highlights[1].title}</strong> <span data-i18n="hero.highlights.backendContent">{highlights[1].content}</span></p>
      <p><strong data-i18n="hero.highlights.devops">{highlights[2].title}</strong> <span data-i18n="hero.highlights.devopsContent">{highlights[2].content}</span></p>
      <p><strong data-i18n="hero.highlights.english">{highlights[3].title}</strong> <span data-i18n="hero.highlights.englishContent">{highlights[3].content}</span></p>
      <p><strong data-i18n="hero.highlights.other">{highlights[4].title}</strong> <span data-i18n="hero.highlights.otherContent">{highlights[4].content}</span></p>
    </div>
  </div>
  <div class="card" data-slide-in="left">
    <div class="avatar">
      <span class="ring">
        <img src="/avatar.png" width="260" height="260" data-i18n-attr="alt:hero.avatarAlt" alt={t.hero.avatarAlt} loading="lazy" />
      </span>
    </div>
    <div class="badge" data-i18n="hero.badge">{t.hero.badge}</div>
    <div class="actions">
      <a class="primary" href={profile.cvLink} target="_blank" rel="noreferrer" data-i18n="hero.buttons.downloadCV">{t.hero.buttons.downloadCV}</a>
      <a class="primary" href="#lien-he" data-i18n="hero.buttons.contact">{t.hero.buttons.contact}</a>
    </div>
  </div>
</section>

<style>
  .hero {
    display: grid;
    gap: 2rem;
    grid-template-columns: 1fr;
    align-items: flex-start;
    grid-template-areas: 'intro' 'card';
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    height: auto;
  }

  .intro h1 { font-size: clamp(2.5rem, 6vw, 4rem); margin: 0 0 1rem; white-space: nowrap; }
  .subtitle { color: var(--muted); font-size: 1.1rem; line-height: 1.7; margin-bottom: 1.5rem; white-space: pre-line; }

  .meta { list-style: none; padding: 0; margin: 0 0 1.5rem; display: flex; gap: 1.25rem; flex-wrap: wrap; color: var(--muted); font-size: 0.95rem; }
  .meta li::before { content: ''; width: 6px; height: 6px; border-radius: 999px; background: rgba(14, 165, 233, 0.6); display: inline-block; margin-right: 0.4rem; vertical-align: middle; }

  .actions { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1.5rem; justify-content: center; }
  .actions a { padding: 0.85rem 1.75rem; border-radius: 999px; font-weight: 600; border: 1px solid transparent; transition: transform 150ms ease, background 150ms ease; text-decoration: none; }
  .actions a:hover { transform: translateY(-2px); }
  .primary { background: linear-gradient(135deg, var(--accent), #6366f1); color: #010409; box-shadow: var(--shadow-sm); }
  .primary:hover { filter: brightness(0.97); box-shadow: var(--shadow-md); }

  .card { background: var(--card); border: none; border-radius: var(--radius-lg); padding: 2rem; text-align: center; backdrop-filter: blur(20px); display: flex; flex-direction: column; align-items: center; box-shadow: none; gap: 1rem; }
  .card { grid-area: card; }
  .intro { grid-area: intro; }

  .avatar { width: 260px; height: 260px; border-radius: 50%; display: inline-grid; place-items: center; border: 4px solid transparent; background: linear-gradient(var(--card), var(--card)) padding-box, linear-gradient(135deg, var(--accent), #6366f1) border-box; background-clip: padding-box, border-box; box-shadow: none; transition: transform 200ms ease, box-shadow 200ms ease; margin-bottom: 0.5rem; box-sizing: border-box; }
  .avatar .ring { width: 100%; height: 100%; border-radius: 50%; overflow: hidden; display: grid; place-items: center; background: #dfe3f0; }
  .avatar img { width: 100%; height: 100%; border-radius: 50%; display: block; border: 0; object-fit: contain; object-position: 50% 50%; box-shadow: none; margin: 0; background: #dfe3f0; }
  .avatar:hover { transform: translateY(-2px); box-shadow: none; }

  .badge { display: inline-flex; padding: 0.4rem 1rem; border-radius: 999px; background: rgba(14, 165, 233, 0.15); color: var(--accent); font-weight: 600; font-size: 0.9rem; }

  .bio { text-align: left; background: var(--surface-weak); border-radius: 16px; padding: 1rem; border: 1px solid var(--border); margin-bottom: 0; }
  .bio p { margin: 0 0 0.5rem; color: var(--muted); font-size: 0.95rem; line-height: 1.5; }
  .bio p:last-child { margin-bottom: 0; }

  @media (max-width: 767px) {
    .intro h1 { text-align: center; white-space: normal; line-height: 1.15; }
    .card {
      background: var(--bg);
    }
  }

  @media (max-width: 600px) {
    .actions { gap: 0.75rem; }
    .actions a { width: 100%; text-align: center; }
    .subtitle,
    .meta,
    .bio { display: none; }
    .intro h1 { white-space: normal; text-align: center; }
  }

  @media (min-width: 768px) {
    .hero { grid-template-columns: 1fr 1fr; grid-template-areas: 'card intro'; }
  }

  @media (max-width: 640px) {
    .hero { padding: 0 1rem; }
    .card { border-radius: 18px; padding: 1.5rem; }
    .intro h1 { text-align: center; }
  }
</style>
